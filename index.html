<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Kontrol LED ESP32 via MQTT (HTTP)</title>
  <script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script>
</head>
<body>
  <h2>Kontrol LED ESP32</h2>
  <button onclick="kirim('ON')">LED ON</button>
  <button onclick="kirim('OFF')">LED OFF</button>

  <script>
    // Tanpa HTTPS: gunakan ws:// (bukan wss://)
    const client = mqtt.connect("ws://test.mosquitto.org:8080/mqtt");

    client.on("connect", () => {
      console.log("Terhubung ke MQTT broker.");
    });

    function kirim(pesan) {
      client.publish("esp32/led/control", pesan);
      console.log("Dikirim:", pesan);
    }
  </script>
</body>
</html>

